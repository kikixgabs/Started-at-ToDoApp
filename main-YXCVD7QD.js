import{$b as Se,Ab as U,Da as b,E as ie,Ea as A,Fb as be,Gb as f,Hb as we,I as m,Ib as q,Jb as B,Kb as C,La as w,Mb as H,Na as l,Nb as ye,Oa as F,Ob as J,P as ne,Pa as u,Q as T,Tb as Z,Ub as P,Wa as pe,Z as i,_a as E,_b as xe,a as re,b as oe,ea as c,ib as de,j as M,kb as ue,lb as ce,mb as ge,na as ae,oa as h,ob as fe,pa as v,pb as he,qb as V,rb as j,sb as G,ta as d,u as ee,ua as n,ub as O,va as a,wa as g,wb as ve,xa as le,xb as S,ya as se,yb as z,za as me}from"./chunk-ZQGQIDYI.js";var _=class r{_loading=T(!1);loading=this._loading.asReadonly();show(){this._loading.set(!0)}hide(){this._loading.set(!1)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=ie({token:r,factory:r.\u0275fac,providedIn:"root"})};function ke(r,o){r&1&&(le(0,"div",0),me(1,"div",1),se())}var $=class r{loadingService=m(_);static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-loading-spinner"]],decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/40","backdrop-blur-sm","flex","items-center","justify-center","z-[9999]"],[1,"w-16","h-16","border-4","border-white","border-t-transparent","rounded-full","animate-spin"]],template:function(t,e){t&1&&h(0,ke,2,0,"div",0),t&2&&v(e.loadingService.loading()?0:-1)},encapsulation:2})};var K=class r{title=T("nagular-tailwind-postcss");lang=m(S);theme=m(z);async ngOnInit(){await Promise.all([this.lang.initLanguage(),this.theme.init()])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){t&1&&g(0,"app-loading-spinner")(1,"router-outlet")},dependencies:[V,$],encapsulation:2})};function Ie(r,o){if(r&1&&(n(0,"small",1),l(1),a()),r&2){let t=A();i(),F(t.errorMessage())}}var I=class r{control=E.required();label=E.required();type=E.required();placeholder=E.required();errorMessage=E.required();static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-custom-input"]],inputs:{control:[1,"control"],label:[1,"label"],type:[1,"type"],placeholder:[1,"placeholder"],errorMessage:[1,"errorMessage"]},decls:5,vars:5,consts:[[3,"formControl","type"],[1,"error"]],template:function(t,e){t&1&&(n(0,"div")(1,"label"),l(2),a(),g(3,"input",0),h(4,Ie,2,1,"small",1),a()),t&2&&(i(2),u(" ",e.label()," "),i(),d("formControl",e.control())("type",e.type()),ae("placeholder",e.placeholder()),i(),v(e.control().invalid&&e.control().touched?4:-1))},dependencies:[P,be,we,ye],styles:["label[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#3f3f46;margin-bottom:.3rem;font-weight:500}[_ngcontent-%COMP%]::placeholder{color:#afafb6}input[_ngcontent-%COMP%]{width:100%;padding:.7rem .9rem;border:2px solid #e4e4e7;border-radius:.75rem;font-size:.95rem;color:#18181b;outline:none;transition:all .2s}input[_ngcontent-%COMP%]:focus{border-color:#2563eb;box-shadow:0 0 0 2px #2563eb33}.error[_ngcontent-%COMP%]{color:#dc2626;font-size:.8rem;margin-top:.2rem;display:block}"]})};var Q=class r{authService=m(U);router=m(j);userPreference=m(ve);languageService=m(S);themeService=m(z);loadingService=m(_);loginForm=new B({email:new C("",{nonNullable:!0,validators:[f.email,f.required]}),password:new C("",{nonNullable:!0,validators:[f.required]})});async onSubmit(){if(!this.loginForm.invalid){this.loadingService.show();try{await M(this.authService.login(this.loginForm.getRawValue()));let o=await this.userPreference.getPreferences();o.preferredLanguage?await this.languageService.setLanguage(o.preferredLanguage):await this.languageService.setLanguage("en"),o.preferredTheme?await this.themeService.setTheme(o.preferredTheme):await this.themeService.setTheme("system"),this.router.navigate(["/app"])}catch(o){console.error("Error en login:",o)}finally{this.loginForm.reset(),this.loadingService.hide()}}}guestLogin(){this.authService.loginAsGuest(),this.router.navigate(["/app"])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-login"]],decls:19,vars:12,consts:[[1,"flex","items-center","justify-center","bg-gradient-to-br","from-orange-500","via-orange-400","to-amber-300"],[1,"bg-white/90","shadow-2xl","p-8","w-full","max-w-md","space-y-6"],[1,"text-center"],[1,"text-2xl","font-semibold","text-zinc-800"],[1,"text-zinc-500","text-sm","mt-1"],[1,"flex","flex-col","space-y-5",3,"ngSubmit","formGroup"],["placeholder","john@doe.com","type","email","errorMessage","Must be a valid email",3,"label","control"],["placeholder","johndoe123","type","password","errorMessage","Invalid password",3,"label","control"],["type","submit",1,"w-full","bg-blue-600","text-white","font-medium","py-2.5","rounded-xl","shadow","hover:bg-blue-700","active:scale-[0.98]","transition","disabled:bg-zinc-400","disabled:cursor-not-allowed",3,"disabled"],["type","button",1,"bg-blue-400","w-full","cursor-pointer","text-white","font-medium","py-2.5","rounded-xl","shadow-xl","hover:bg-blue-500","hover:scale-102","transition",3,"click"],[1,"text-center","text-sm","text-zinc-500"],["routerLink","/register",1,"text-blue-600","cursor-pointer","hover:underline"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),a(),n(5,"p",4),l(6),a()(),n(7,"form",5),b("ngSubmit",function(){return e.onSubmit()}),g(8,"app-custom-input",6)(9,"app-custom-input",7),n(10,"button",8),l(11),a()(),n(12,"div")(13,"button",9),b("click",function(){return e.guestLogin()}),l(14),a()(),n(15,"div",10),l(16),n(17,"a",11),l(18),a()()()()),t&2&&(i(4),u("",e.languageService.t("login.title")," \u{1F44B}"),i(2),F(e.languageService.t("login.subtitle")),i(),d("formGroup",e.loginForm),i(),d("label",e.languageService.t("login.email"))("control",e.loginForm.get("email")),i(),d("label",e.languageService.t("login.password"))("control",e.loginForm.get("password")),i(),d("disabled",e.loginForm.invalid),i(),u(" ",e.languageService.t("login.login")," "),i(3),u(" ",e.languageService.t("login.guest")," "),i(2),u(" ",e.languageService.t("login.goRegist")," "),i(2),F(e.languageService.t("login.register")))},dependencies:[Z,H,q,P,J,G,I],encapsulation:2})};function _e(){return r=>{let o=r.value??"";if(!o)return{required:!0};let t=o.length>=8,e=/[a-zA-Z]/.test(o),s=/\d/.test(o),p=/[!@#$%^&*(),.?":{}|<>]/.test(o);return t&&e&&s&&p?null:{weakPassword:{hasMinLength:t,hasLetter:e,hasNumber:s,hasSymbol:p}}}}function Fe(r,o){return t=>{let e=t,s=e.get(r)?.value,p=e.get(o)?.value;return s===p?null:{passwordsMismatch:!0}}}function Me(r,o){r&1&&(n(0,"p",8),l(1,"Checking email availability"),a())}function Le(r,o){r&1&&(n(0,"p",9),l(1,"This email is already registered \u274C"),a())}function Re(r,o){if(r&1&&(n(0,"div",12)(1,"p",17)(2,"span"),l(3," \u2705 "),a(),l(4," Minimum 8 characters "),a(),n(5,"p",17)(6,"span"),l(7," \u2705 "),a(),l(8," Contains letters "),a(),n(9,"p",17)(10,"span"),l(11," \u2705 "),a(),l(12," Contains numbers "),a(),n(13,"p",17)(14,"span"),l(15," \u2705 "),a(),l(16," Contains symbols "),a()()),r&2){let t,e,s,p,y,R,D,N,x=A();i(),w("text-green-600",(t=x.registerForm.get("password"))==null||t.errors==null||t.errors.weakPassword==null?null:t.errors.weakPassword.hasMinLength),i(),w("hidden",!(!((e=x.registerForm.get("password"))==null||e.errors==null||e.errors.weakPassword==null)&&e.errors.weakPassword.hasMinLength)),i(3),w("text-green-600",(s=x.registerForm.get("password"))==null||s.errors==null||s.errors.weakPassword==null?null:s.errors.weakPassword.hasLetter),i(),w("hidden",!(!((p=x.registerForm.get("password"))==null||p.errors==null||p.errors.weakPassword==null)&&p.errors.weakPassword.hasLetter)),i(3),w("text-green-600",(y=x.registerForm.get("password"))==null||y.errors==null||y.errors.weakPassword==null?null:y.errors.weakPassword.hasNumber),i(),w("hidden",!(!((R=x.registerForm.get("password"))==null||R.errors==null||R.errors.weakPassword==null)&&R.errors.weakPassword.hasNumber)),i(3),w("text-green-600",(D=x.registerForm.get("password"))==null||D.errors==null||D.errors.weakPassword==null?null:D.errors.weakPassword.hasSymbol),i(),w("hidden",!(!((N=x.registerForm.get("password"))==null||N.errors==null||N.errors.weakPassword==null)&&N.errors.weakPassword.hasSymbol))}}function De(r,o){r&1&&(n(0,"p",13),l(1,"Passwords do not match \u274C"),a())}var W=class r{authService=m(U);router=m(j);lang=m(S);loadingService=m(_);constructor(){this.registerForm.get("email")?.valueChanges.pipe(ee(500)).subscribe(()=>this.checkEmail())}ngOnInit(){this.registerForm.get("email")?.valueChanges.pipe(ee(500)).subscribe(()=>this.checkEmail())}registerForm=new B({username:new C("",{nonNullable:!0,validators:[f.required,f.minLength(3)]}),email:new C("",{nonNullable:!0,validators:[f.required,f.email]}),password:new C("",{nonNullable:!0,validators:[f.required,_e()]}),confirmPassword:new C("",{nonNullable:!0,validators:[f.required]})},{validators:Fe("password","confirmPassword")});async onSubmit(){if(this.registerForm.valid){this.loadingService.show();try{let o=await M(this.authService.register(this.registerForm.getRawValue()));console.log("\u2705 Usuario registrado:",o),this.router.navigate(["/login"])}catch(o){console.error("\u274C Error en el registro:",o)}finally{this.loadingService.hide()}}else this.registerForm.markAllAsTouched()}emailInUse=!1;checkingEmail=!1;onEmailBlur(){this.checkEmail(!0)}async checkEmail(o=!1){let t=this.registerForm.get("email"),e=t?.value;if(!e||t?.invalid){this.emailInUse=!1;return}if(!(!o&&!t?.dirty)){this.checkingEmail=!0,this.emailInUse=!1;try{let s=await M(this.authService.checkEmail(e));this.emailInUse=s.inUse}catch{}this.checkingEmail=!1}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-register"]],decls:22,vars:21,consts:[[1,"flex","items-center","justify-center","bg-gradient-to-br","from-orange-500","via-orange-400","to-amber-300"],[1,"bg-white/90","backdrop-blur-md","shadow-2xl","p-8","w-[24rem]","md:w-[28rem]","flex","flex-col","gap-6"],[1,"text-center"],[1,"text-3xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["placeholder","John Doe","type","text","errorMessage","Enter a valid username",3,"label","control"],["placeholder","John@Doe.com","type","email","errorMessage","Enter a valid email",3,"blur","label","control"],[1,"text-sm","text-orange-600"],[1,"text-sm","text-red-600"],["type","password","errorMessage","Enter a valid password",3,"label","control","placeholder"],["type","password","errorMessage","Passwords do not match",3,"label","control","placeholder"],[1,"text-sm","text-gray-600","mt-2","space-y-1"],[1,"text-red-600","text-sm","mt-1"],["type","submit",1,"bg-orange-500","hover:bg-orange-600","disabled:opacity-60","text-white","font-medium","py-2.5","rounded-xl","shadow","transition-colors","duration-200",3,"disabled"],[1,"text-center","text-sm","text-gray-500"],["routerLink","/login",1,"text-orange-600","hover:text-orange-700","font-medium","transition-colors","duration-200"],[1,"flex","items-center","gap-1"]],template:function(t,e){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4),a(),n(5,"p",4),l(6),a()(),n(7,"form",5),b("ngSubmit",function(){return e.onSubmit()}),g(8,"app-custom-input",6),n(9,"app-custom-input",7),b("blur",function(){return e.onEmailBlur()}),a(),h(10,Me,2,0,"p",8),h(11,Le,2,0,"p",9),g(12,"app-custom-input",10)(13,"app-custom-input",11),h(14,Re,17,16,"div",12),h(15,De,2,0,"p",13),n(16,"button",14),l(17),a()(),n(18,"p",15),l(19),n(20,"a",16),l(21),a()()()()),t&2){let s,p,y;i(4),u(" ",e.lang.t("register.title")," \u2728 "),i(2),u(" ",e.lang.t("register.subtitle")," "),i(),d("formGroup",e.registerForm),i(),d("label",e.lang.t("register.username"))("control",e.registerForm.get("username")),i(),d("label",e.lang.t("register.email"))("control",e.registerForm.get("email")),i(),v(e.checkingEmail?10:-1),i(),v(e.emailInUse&&((s=e.registerForm.get("email"))!=null&&s.valid)?11:-1),i(),d("label",e.lang.t("register.password"))("control",e.registerForm.get("password"))("placeholder",e.lang.t("register.password")),i(),d("label",e.lang.t("register.confirmPassword"))("control",e.registerForm.get("confirmPassword"))("placeholder",e.lang.t("register.password")),i(),v((p=e.registerForm.get("password"))!=null&&p.touched&&(!((p=e.registerForm.get("password"))==null||p.errors==null)&&p.errors.weakPassword)?14:-1),i(),v(e.registerForm.errors!=null&&e.registerForm.errors.passwordsMismatch&&((y=e.registerForm.get("confirmPassword"))!=null&&y.touched)?15:-1),i(),d("disabled",e.registerForm.invalid),i(),u(" ",e.lang.t("register.register")," "),i(2),u(" ",e.lang.t("register.goLogin")," "),i(2),u(" ",e.lang.t("register.login")," ")}},dependencies:[Z,H,q,P,J,G,I],encapsulation:2})};var X=class r{lang=m(S);static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-authlayout-component"]],decls:16,vars:1,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gradient-to-tl","from-blue-600","via-zinc-600","to-orange-400","cursor-default"],[1,"m-3","bg-white/90","backdrop-blur-md","shadow-2xl","rounded-3xl","p-6","w-[24rem]","md:w-[28rem]","flex","flex-col","transition-all"],[1,"text-center"],[1,"flex","w-full","justify-end","gap-4"],[1,"text-zinc-800","cursor-pointer","mb-2","underline",3,"click"],[1,"text-4xl","font-bold","tracking-tight","text-orange-400"],[1,"text-zinc-400"],[1,"text-sm","text-gray-500","mt-1"],[1,"mt-4"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),b("click",function(){return e.lang.setLanguage("en")}),l(5," English "),a(),n(6,"div",4),b("click",function(){return e.lang.setLanguage("es")}),l(7," Espa\xF1ol "),a()(),n(8,"h1",5),l(9," Reddot"),n(10,"span",6),l(11,"Tasks"),a()(),n(12,"p",7),l(13),a()(),n(14,"div",8),g(15,"router-outlet"),a()()()),t&2&&(i(13),F(e.lang.t("authLayout.subtitle")))},dependencies:[V],encapsulation:2})};var Ee=[{path:"",component:X,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Q},{path:"register",component:W}]}];var Y=[{path:"",children:Ee},{path:"app",loadChildren:()=>import("./chunk-IEACMD3W.js").then(r=>r.PRIVATE_ROUTES)},{path:"**",redirectTo:""}];var Pe=(r,o)=>{let t=localStorage.getItem("token");if(t){let e=r.clone({setHeaders:{Authorization:`Bearer ${t}`},withCredentials:!0});return o(e)}return o(r)};var te={providers:[ne(),ue(ge(),ce([Pe])),pe(),O(Y),he(fe())]};de(K,oe(re({},te),{providers:[...te.providers||[],O(Y),Se(xe())]})).catch(r=>console.error(r));
