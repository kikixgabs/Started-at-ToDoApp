import{Ba as v,Ca as W,Db as ie,Eb as p,Fb as ne,Gb as R,Hb as D,I as m,Ib as d,Kb as E,La as n,Lb as ae,Ma as Z,Mb as L,Na as $,P as j,Q as U,Rb as N,Sb as f,Ua as K,Ya as g,Yb as le,Z as l,Zb as se,a as V,b as q,ea as u,gb as Q,ib as X,j as b,jb as Y,kb as ee,mb as te,na as B,nb as re,oa as H,ob as y,pa as J,pb as w,qb as x,sb as C,ta as s,ua as i,ub as oe,va as a,vb as S,wa as c,wb as F,yb as M}from"./chunk-EIVEX6ZL.js";var _=class r{title=U("nagular-tailwind-postcss");lang=m(S);theme=m(F);async ngOnInit(){await Promise.all([this.lang.initLanguage(),this.theme.init()])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){e&1&&c(0,"router-outlet")},dependencies:[y],encapsulation:2})};function ce(r,o){if(r&1&&(i(0,"small",1),n(1),a()),r&2){let e=W();l(),Z(e.errorMessage())}}var h=class r{control=g.required();label=g.required();type=g.required();placeholder=g.required();errorMessage=g.required();static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-custom-input"]],inputs:{control:[1,"control"],label:[1,"label"],type:[1,"type"],placeholder:[1,"placeholder"],errorMessage:[1,"errorMessage"]},decls:5,vars:5,consts:[[3,"formControl","type"],[1,"error"]],template:function(e,t){e&1&&(i(0,"div")(1,"label"),n(2),a(),c(3,"input",0),H(4,ce,2,1,"small",1),a()),e&2&&(l(2),$(" ",t.label()," "),l(),s("formControl",t.control())("type",t.type()),B("placeholder",t.placeholder()),l(),J(t.control().invalid&&t.control().touched?4:-1))},dependencies:[f,ie,ne,ae],styles:["label[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#3f3f46;margin-bottom:.3rem;font-weight:500}[_ngcontent-%COMP%]::placeholder{color:#afafb6}input[_ngcontent-%COMP%]{width:100%;padding:.7rem .9rem;border:2px solid #e4e4e7;border-radius:.75rem;font-size:.95rem;color:#18181b;outline:none;transition:all .2s}input[_ngcontent-%COMP%]:focus{border-color:#2563eb;box-shadow:0 0 0 2px #2563eb33}.error[_ngcontent-%COMP%]{color:#dc2626;font-size:.8rem;margin-top:.2rem;display:block}"]})};var T=class r{authService=m(M);router=m(w);userPreference=m(oe);languageService=m(S);themeService=m(F);loginForm=new D({email:new d("",{nonNullable:!0,validators:[p.email,p.required]}),password:new d("",{nonNullable:!0,validators:[p.required]})});async onSubmit(){if(!this.loginForm.invalid)try{await b(this.authService.login(this.loginForm.getRawValue()));let o=await this.userPreference.getPreferences();o.preferredLanguage?await this.languageService.setLanguage(o.preferredLanguage):await this.languageService.setLanguage("en"),o.preferredTheme?await this.themeService.setTheme(o.preferredTheme):await this.themeService.setTheme("system"),this.router.navigate(["/app"])}catch(o){console.error("Error en login:",o)}finally{this.loginForm.reset()}}guestLogin(){this.authService.loginAsGuest(),this.router.navigate(["/app"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-login"]],decls:19,vars:4,consts:[[1,"flex","items-center","justify-center","bg-gradient-to-br","from-orange-500","via-orange-400","to-amber-300"],[1,"bg-white/90","shadow-2xl","p-8","w-full","max-w-md","space-y-6"],[1,"text-center"],[1,"text-2xl","font-semibold","text-zinc-800"],[1,"text-zinc-500","text-sm","mt-1"],[1,"flex","flex-col","space-y-5",3,"ngSubmit","formGroup"],["label","Email","placeholder","john@doe.com","type","email","errorMessage","Must be a valid email",3,"control"],["label","Password","placeholder","johndoe123","type","password","errorMessage","Invalid password",3,"control"],["type","submit",1,"w-full","bg-blue-600","text-white","font-medium","py-2.5","rounded-xl","shadow","hover:bg-blue-700","active:scale-[0.98]","transition","disabled:bg-zinc-400","disabled:cursor-not-allowed",3,"disabled"],["type","button",1,"bg-blue-400","w-full","cursor-pointer","text-white","font-medium","py-2.5","rounded-xl","shadow-xl","hover:bg-blue-500","hover:scale-102","transition",3,"click"],[1,"text-center","text-sm","text-zinc-500"],["routerLink","/register",1,"text-blue-600","cursor-pointer","hover:underline"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),n(4,"Welcome \u{1F44B}"),a(),i(5,"p",4),n(6,"Log in to continue"),a()(),i(7,"form",5),v("ngSubmit",function(){return t.onSubmit()}),c(8,"app-custom-input",6)(9,"app-custom-input",7),i(10,"button",8),n(11," Login "),a()(),i(12,"div")(13,"button",9),v("click",function(){return t.guestLogin()}),n(14," Join as guest "),a()(),i(15,"div",10),n(16," Don't have an account? "),i(17,"a",11),n(18,"Register"),a()()()()),e&2&&(l(7),s("formGroup",t.loginForm),l(),s("control",t.loginForm.get("email")),l(),s("control",t.loginForm.get("password")),l(),s("disabled",t.loginForm.invalid))},dependencies:[N,E,R,f,L,x,h],encapsulation:2})};var P=class r{authService=m(M);router=m(w);registerForm=new D({username:new d("",{nonNullable:!0,validators:[p.required,p.minLength(3)]}),email:new d("",{nonNullable:!0,validators:[p.required,p.email]}),password:new d("",{nonNullable:!0,validators:[p.required,p.minLength(6)]})});async onSubmit(){if(this.registerForm.valid)try{let o=await b(this.authService.register(this.registerForm.getRawValue()));console.log("\u2705 Usuario registrado:",o),this.router.navigate(["/login"])}catch(o){console.error("\u274C Error en el registro:",o)}else this.registerForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-register"]],decls:18,vars:6,consts:[[1,"flex","items-center","justify-center","bg-gradient-to-br","from-orange-500","via-orange-400","to-amber-300"],[1,"bg-white/90","backdrop-blur-md","shadow-2xl","p-8","w-[24rem]","md:w-[28rem]","flex","flex-col","gap-6"],[1,"text-center"],[1,"text-3xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["label","Username","placeholder","Enter your username","type","text","errorMessage","Enter a valid username",3,"control"],["label","Email","placeholder","Enter your email","type","email","errorMessage","Enter a valid email",3,"control"],["label","Password","placeholder","Enter your password","type","password","errorMessage","Enter a valid password",3,"control"],["label","confirmPassword","placeholder","Confirm your password","type","password","errorMessage","Mismatch passwords",3,"control"],["type","submit",1,"bg-orange-500","hover:bg-orange-600","disabled:opacity-60","text-white","font-medium","py-2.5","rounded-xl","shadow","transition-colors","duration-200",3,"disabled"],[1,"text-center","text-sm","text-gray-500"],["routerLink","/login",1,"text-orange-600","hover:text-orange-700","font-medium","transition-colors","duration-200"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4," Create Account \u2728 "),a(),i(5,"p",4),n(6," Join us and start organizing your tasks "),a()(),i(7,"form",5),v("ngSubmit",function(){return t.onSubmit()}),c(8,"app-custom-input",6)(9,"app-custom-input",7)(10,"app-custom-input",8)(11,"app-custom-input",9),i(12,"button",10),n(13," Register "),a()(),i(14,"p",11),n(15," Already have an account? "),i(16,"a",12),n(17," Login "),a()()()()),e&2&&(l(7),s("formGroup",t.registerForm),l(),s("control",t.registerForm.get("username")),l(),s("control",t.registerForm.get("email")),l(),s("control",t.registerForm.get("password")),l(),s("control",t.registerForm.get("password")),l(),s("disabled",t.registerForm.invalid))},dependencies:[N,E,R,f,L,x,h],encapsulation:2})};var k=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-authlayout-component"]],decls:11,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gradient-to-tl","from-blue-600","via-zinc-600","to-orange-400","cursor-default"],[1,"m-3","bg-white/90","backdrop-blur-md","shadow-2xl","rounded-3xl","p-6","w-[24rem]","md:w-[28rem]","flex","flex-col","transition-all"],[1,"text-center"],[1,"text-4xl","font-bold","tracking-tight","text-orange-400"],[1,"text-zinc-400"],[1,"text-sm","text-gray-500","mt-1"],[1,"mt-4"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4," Reddot"),i(5,"span",4),n(6,"Tasks"),a()(),i(7,"p",5),n(8,"Welcome back \u2014 please sign in to continue"),a()(),i(9,"div",6),c(10,"router-outlet"),a()()())},dependencies:[y],encapsulation:2})};var pe=[{path:"",component:k,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:T},{path:"register",component:P}]}];var O=[{path:"",children:pe},{path:"app",loadChildren:()=>import("./chunk-PXGFAIGB.js").then(r=>r.PRIVATE_ROUTES)},{path:"**",redirectTo:""}];var ue=(r,o)=>{let e=localStorage.getItem("token");if(e){let t=r.clone({setHeaders:{Authorization:`Bearer ${e}`},withCredentials:!0});return o(t)}return o(r)};var G={providers:[j(),X(ee(),Y([ue])),K(),C(O),re(te())]};Q(_,q(V({},G),{providers:[...G.providers||[],C(O),se(le())]})).catch(r=>console.error(r));
