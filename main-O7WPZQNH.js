import{Ab as I,Ba as x,Bb as R,Ca as J,Cb as se,Db as p,E as w,Eb as le,Fb as E,Gb as D,H as V,Hb as d,I as m,Jb as L,Kb as me,La as n,Lb as N,Ma as K,Na as Z,P as q,Q as H,Qb as A,Rb as f,Ua as Q,Xb as pe,Ya as g,Yb as ce,Z as s,a as z,b as G,ea as c,gb as X,hb as Y,ib as ee,j as y,jb as te,kb as re,mb as oe,na as B,nb as ie,oa as $,ob as C,pa as W,pb as S,qb as F,sb as M,ta as l,tb as ne,ua as i,va as a,wa as u,zb as ae}from"./chunk-HZKJCEA7.js";var T=class r{title=H("nagular-tailwind-postcss");lang=m(R);theme=m(I);async ngOnInit(){await Promise.all([this.lang.initLanguage(),this.theme.init()])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(t,o){t&1&&u(0,"router-outlet")},dependencies:[C],encapsulation:2})};var v=class r{constructor(e){this.http=e}apiUrl=ne.apiUrl;register(e){return this.http.post(`${this.apiUrl}/register`,e)}login(e){return this.http.post(`${this.apiUrl}/login`,e,{withCredentials:!0})}static \u0275fac=function(t){return new(t||r)(V(Y))};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};var ue=class r{getElement(e){return localStorage.getItem(e)}setElement(e,t){localStorage.setItem(e,t)}clearStorage(){localStorage.clear()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};function ve(r,e){if(r&1&&(i(0,"small",1),n(1),a()),r&2){let t=J();s(),K(t.errorMessage())}}var b=class r{control=g.required();label=g.required();type=g.required();placeholder=g.required();errorMessage=g.required();static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-custom-input"]],inputs:{control:[1,"control"],label:[1,"label"],type:[1,"type"],placeholder:[1,"placeholder"],errorMessage:[1,"errorMessage"]},decls:5,vars:5,consts:[[3,"formControl","type"],[1,"error"]],template:function(t,o){t&1&&(i(0,"div")(1,"label"),n(2),a(),u(3,"input",0),$(4,ve,2,1,"small",1),a()),t&2&&(s(2),Z(" ",o.label()," "),s(),l("formControl",o.control())("type",o.type()),B("placeholder",o.placeholder()),s(),W(o.control().invalid&&o.control().touched?4:-1))},dependencies:[f,se,le,me],styles:["label[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#3f3f46;margin-bottom:.3rem;font-weight:500}[_ngcontent-%COMP%]::placeholder{color:#afafb6}input[_ngcontent-%COMP%]{width:100%;padding:.7rem .9rem;border:2px solid #e4e4e7;border-radius:.75rem;font-size:.95rem;color:#18181b;outline:none;transition:all .2s}input[_ngcontent-%COMP%]:focus{border-color:#2563eb;box-shadow:0 0 0 2px #2563eb33}.error[_ngcontent-%COMP%]{color:#dc2626;font-size:.8rem;margin-top:.2rem;display:block}"]})};var k=class r{authService=m(v);router=m(S);userPreference=m(ae);languageService=m(R);themeService=m(I);loginForm=new D({email:new d("",{nonNullable:!0,validators:[p.email,p.required]}),password:new d("",{nonNullable:!0,validators:[p.required]})});async onSubmit(){if(!this.loginForm.invalid)try{await y(this.authService.login(this.loginForm.getRawValue()));let e=await this.userPreference.getPreferences();e.preferredLanguage?await this.languageService.setLanguage(e.preferredLanguage):await this.languageService.setLanguage("en"),e.preferredTheme?await this.themeService.setTheme(e.preferredTheme):await this.themeService.setTheme("system"),this.router.navigate(["/app"])}catch(e){console.error("Error en login:",e)}finally{this.loginForm.reset()}}guestLogin(){this.router.navigate(["/app"])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-login"]],decls:16,vars:4,consts:[[1,"flex","items-center","justify-center","bg-gradient-to-br","from-orange-500","via-orange-400","to-amber-300"],[1,"bg-white/90","shadow-2xl","p-8","w-full","max-w-md","space-y-6"],[1,"text-center"],[1,"text-2xl","font-semibold","text-zinc-800"],[1,"text-zinc-500","text-sm","mt-1"],[1,"flex","flex-col","space-y-5",3,"ngSubmit","formGroup"],["label","Email","placeholder","john@doe.com","type","email","errorMessage","Must be a valid email",3,"control"],["label","Password","placeholder","johndoe123","type","password","errorMessage","Invalid password",3,"control"],["type","submit",1,"w-full","bg-blue-600","text-white","font-medium","py-2.5","rounded-xl","shadow","hover:bg-blue-700","active:scale-[0.98]","transition","disabled:bg-zinc-400","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center","text-sm","text-zinc-500"],["routerLink","/register",1,"text-blue-600","cursor-pointer","hover:underline"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),n(4,"Welcome \u{1F44B}"),a(),i(5,"p",4),n(6,"Log in to continue"),a()(),i(7,"form",5),x("ngSubmit",function(){return o.onSubmit()}),u(8,"app-custom-input",6)(9,"app-custom-input",7),i(10,"button",8),n(11," Login "),a()(),i(12,"div",9),n(13," Don't have an account? "),i(14,"a",10),n(15,"Register"),a()()()()),t&2&&(s(7),l("formGroup",o.loginForm),s(),l("control",o.loginForm.get("email")),s(),l("control",o.loginForm.get("password")),s(),l("disabled",o.loginForm.invalid))},dependencies:[A,L,E,f,N,F,b],encapsulation:2})};var _=class r{authService=m(v);router=m(S);registerForm=new D({username:new d("",{nonNullable:!0,validators:[p.required,p.minLength(3)]}),email:new d("",{nonNullable:!0,validators:[p.required,p.email]}),password:new d("",{nonNullable:!0,validators:[p.required,p.minLength(6)]})});async onSubmit(){if(this.registerForm.valid)try{let e=await y(this.authService.register(this.registerForm.getRawValue()));console.log("\u2705 Usuario registrado:",e),this.router.navigate(["/login"])}catch(e){console.error("\u274C Error en el registro:",e)}else this.registerForm.markAllAsTouched()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-register"]],decls:18,vars:6,consts:[[1,"flex","items-center","justify-center","bg-gradient-to-br","from-orange-500","via-orange-400","to-amber-300"],[1,"bg-white/90","backdrop-blur-md","shadow-2xl","p-8","w-[24rem]","md:w-[28rem]","flex","flex-col","gap-6"],[1,"text-center"],[1,"text-3xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["label","Username","placeholder","Enter your username","type","text","errorMessage","Enter a valid username",3,"control"],["label","Email","placeholder","Enter your email","type","email","errorMessage","Enter a valid email",3,"control"],["label","Password","placeholder","Enter your password","type","password","errorMessage","Enter a valid password",3,"control"],["label","confirmPassword","placeholder","Confirm your password","type","password","errorMessage","Mismatch passwords",3,"control"],["type","submit",1,"bg-orange-500","hover:bg-orange-600","disabled:opacity-60","text-white","font-medium","py-2.5","rounded-xl","shadow","transition-colors","duration-200",3,"disabled"],[1,"text-center","text-sm","text-gray-500"],["routerLink","/login",1,"text-orange-600","hover:text-orange-700","font-medium","transition-colors","duration-200"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4," Create Account \u2728 "),a(),i(5,"p",4),n(6," Join us and start organizing your tasks "),a()(),i(7,"form",5),x("ngSubmit",function(){return o.onSubmit()}),u(8,"app-custom-input",6)(9,"app-custom-input",7)(10,"app-custom-input",8)(11,"app-custom-input",9),i(12,"button",10),n(13," Register "),a()(),i(14,"p",11),n(15," Already have an account? "),i(16,"a",12),n(17," Login "),a()()()()),t&2&&(s(7),l("formGroup",o.registerForm),s(),l("control",o.registerForm.get("username")),s(),l("control",o.registerForm.get("email")),s(),l("control",o.registerForm.get("password")),s(),l("control",o.registerForm.get("password")),s(),l("disabled",o.registerForm.invalid))},dependencies:[A,L,E,f,N,F,b],encapsulation:2})};var O=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=c({type:r,selectors:[["app-authlayout-component"]],decls:11,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gradient-to-tl","from-blue-600","via-zinc-600","to-orange-400","cursor-default"],[1,"m-3","bg-white/90","backdrop-blur-md","shadow-2xl","rounded-3xl","p-6","w-[24rem]","md:w-[28rem]","flex","flex-col","transition-all"],[1,"text-center"],[1,"text-4xl","font-bold","tracking-tight","text-orange-400"],[1,"text-zinc-400"],[1,"text-sm","text-gray-500","mt-1"],[1,"mt-4"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4," Reddot"),i(5,"span",4),n(6,"Tasks"),a()(),i(7,"p",5),n(8,"Welcome back \u2014 please sign in to continue"),a()(),i(9,"div",6),u(10,"router-outlet"),a()()())},dependencies:[C],encapsulation:2})};var ge=[{path:"",component:O,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:k},{path:"register",component:_}]}];var j=[{path:"",children:ge},{path:"app",loadChildren:()=>import("./chunk-U6DA4PY7.js").then(r=>r.PRIVATE_ROUTES)},{path:"**",redirectTo:""}];var fe=(r,e)=>{let t=localStorage.getItem("token");if(t){let o=r.clone({setHeaders:{Authorization:`Bearer ${t}`},withCredentials:!0});return e(o)}return e(r)};var U={providers:[q(),ee(re(),te([fe])),Q(),M(j),ie(oe())]};X(T,G(z({},U),{providers:[...U.providers||[],M(j),ce(pe())]})).catch(r=>console.error(r));
